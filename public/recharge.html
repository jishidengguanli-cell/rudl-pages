<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Recharge</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;padding:24px;background:#fafafa;color:#222}
    .wrap{max-width:960px;margin:0 auto}
    .bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .plans{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    .card{background:#fff;border:1px solid #e5e5e5;border-radius:16px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,.04)}
    .price{font-size:28px;font-weight:700;margin:6px 0}
    .muted{color:#666;font-size:14px}
    button{border:1px solid #ddd;background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer}
    button:hover{background:#f7f7f7}
    .stack{display:flex;gap:8px;flex-wrap:wrap;margin-top:16px}
    .notice{margin-top:18px;color:#666;font-size:14px}
    .hr{height:1px;background:#eee;margin:20px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bar">
      <h1>Recharge</h1>
      <div>Balance: <b id="balance">0</b> pts</div>
    </div>

    <div class="plans" id="plans"></div>

    <div class="hr"></div>

    <div class="stack">
      <button id="dl-android">Download Android (-3 pts)</button>
      <button id="dl-ios">Download iOS (-5 pts)</button>
      <button id="reset">Reset Balance</button>
    </div>

    <p class="notice">
      Downloads cost 3 pts (Android) and 5 pts (iOS). You can recharge any time.
      Currently only accepts virtual currency payments, e-wallet addresses:
    </p>
  </div>

  <script>
    // --- demo plans (英文) ---
    const plans = [
      { name: 'Starter 100', points: 100, price: 10 },
      { name: 'Value 500', points: 500, price: 45 },
      { name: 'Pro 2000', points: 2000, price: 150 },
      { name: 'Business 5000', points: 5000, price: 400 },
      { name: 'Enterprise 15000', points: 15000, price: 1100 },
    ];

    const LS_KEY = 'demo_points';
    const COST = { android: 3, ios: 5 };

    function getPts() { return parseInt(localStorage.getItem(LS_KEY) || '0', 10); }
    function setPts(v) { localStorage.setItem(LS_KEY, String(v)); draw(); }
    function addPts(delta){ setPts(getPts() + delta); }
    function deductPts(delta){
      const cur = getPts();
      if (cur < delta) { alert('Insufficient points'); return; }
      setPts(cur - delta);
    }

    function draw() {
      document.querySelector('#balance').textContent = getPts();
    }

    function renderPlans(){
      const host = document.querySelector('#plans');
      host.innerHTML = '';
      plans.forEach(p => {
        const el = document.createElement('div');
        el.className = 'card';
        el.innerHTML = `
          <div class="title" style="font-weight:600">${p.name}</div>
          <div class="price">$${p.price} <span class="muted">/ one-time</span></div>
          <div class="muted">Includes ${p.points} points</div>
          <div style="margin-top:12px">
            <button>Buy now</button>
          </div>
        `;
        el.querySelector('button').addEventListener('click', () => addPts(p.points));
        host.appendChild(el);
      });
    }

    // events
    document.addEventListener('DOMContentLoaded', () => {
      renderPlans(); draw();
      document.getElementById('dl-android').onclick = () => deductPts(COST.android);
      document.getElementById('dl-ios').onclick = () => deductPts(COST.ios);
      document.getElementById('reset').onclick = () => setPts(0);
    });
  </script>
</body>
</html>

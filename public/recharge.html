<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>充值 - RU Download</title>
<style>
  body{margin:0;background:#0f172a;color:#e5e7eb;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
  header{background:#0b1222;border-bottom:1px solid #1f2937}
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  nav{display:flex;align-items:center;gap:12px}
  nav .right{margin-left:auto;display:flex;gap:10px}
  a{color:#93c5fd;text-decoration:none}
  .btn{padding:8px 12px;border-radius:10px;border:0;background:#3b82f6;color:#fff;cursor:pointer}
  .btn.red{background:#ef4444}
  .card{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:24px;margin-top:20px}
  .muted{color:#9ca3af}
  input[type="text"],select{width:100%;padding:10px;border-radius:10px;border:1px solid #334155;background:#0b1222;color:#e5e7eb}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
</style>

<header>
  <div class="wrap">
    <nav>
      <strong>RU Download</strong>
      <div class="right">
        <a href="/dashboard.html">分發列表</a>
        <a href="#" id="logout">登出</a>
      </div>
    </nav>
  </div>
</header>

<main class="wrap">
  <div class="card">
    <h2 style="margin:0 0 6px">充值</h2>
    <div id="me" class="muted">讀取中…</div>

    <div class="card" style="margin-top:16px">
      <h3 style="margin:0 0 8px">選擇方案</h3>
      <div class="row">
        <div>
          <label>方案</label>
          <select id="plan">
            <option value="starter">Starter（100 次下載） - $5</option>
            <option value="pro">Pro（1,500 次下載） - $29</option>
            <option value="team">Team（10,000 次下載） - $149</option>
          </select>
        </div>
        <div>
          <label>備註（可選）</label>
          <input id="note" type="text" placeholder="公司抬頭 / 稅務資訊等（僅顯示）">
        </div>
      </div>
      <p class="muted" style="margin-top:6px">此頁僅為 UI 佈局示意，尚未串接金流。待你決定方案，我再幫你接 Stripe / YooKassa / 對公轉帳 等。</p>
      <div style="margin-top:12px">
        <button class="btn" id="btn-pay">前往支付（示意）</button>
        <a class="btn red" href="/dashboard.html" style="margin-left:8px">返回控制台</a>
      </div>
      <div id="msg" class="muted" style="margin-top:8px"></div>
    </div>
  </div>
</main>

<script>
(async () => {
  try{
    const r = await fetch('/api/auth/me', {credentials:'include'}); const me = await r.json();
    document.getElementById('me').textContent = me?.email ? `目前登入：${me.email}` : '尚未登入';
  }catch{}
})();

document.getElementById('btn-pay').addEventListener('click', ()=>{
  const plan = document.getElementById('plan').value;
  const note = document.getElementById('note').value.trim();
  document.getElementById('msg').textContent = `已選擇方案：${plan}${note?`，備註：${note}`:''}。目前為示意流程，稍後可接正式金流。`;
});

// 登出（同 dashboard）
document.getElementById('logout').addEventListener('click', async (e)=>{
  e.preventDefault();
  try{ await fetch('/api/auth/logout', {method:'POST', credentials:'include'}); }catch{}
  location.href = '/login.html';
});
</script>
